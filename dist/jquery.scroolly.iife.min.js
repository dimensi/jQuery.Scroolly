!function(t){"use strict";function e(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var o=e(t);function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r={options:{timeout:null,meter:o.default(".scroolly"),body:document},theCSSPrefix:"",theDashedCSSPrefix:"",isMobile:!1,isInitialized:!1,animFrame:null,direction:0,scrollTop:0,scrollCenter:0,scrollBottom:0,docHeight:0,docMiddle:0,winHeight:o.default(window).height(),scrollLayout:{},_isObject:function(t){return"object"===n(t)},_isArray:function(t){return t instanceof Array},_isNumber:function(t){return t instanceof Number||"number"==typeof t},_isString:function(t){return t instanceof String||"string"==typeof t},_default:function(t,e,o){void 0===o&&(o=null);var n=(e+"").split(".");if(t&&(r._isObject(t)||r._isArray(t))){var i,a=t;for(var s in n){if(i=n[s],!r._isObject(a)&&!r._isArray(a)||void 0===a[i])return o;a=a[i]}return a}return o},parseCoords:function(t){var e=t.split(/\s*=\s*/),o=e[0]||"doc-top",n=r.parseCoord(o),i=e[1]||n.anchor;return[n,r.parseCoord(i)]},parseCoord:function(t){var e="(\\+|-)?\\s*(\\d+)(\\%|vp|doc|el|con)?",o=new RegExp(e,"gi"),n=t.match(/((vp|doc|el|con)-)?(top|center|bottom)?/i),r=t.match(o);if(!n&&!r)return!1;var i=n[1]?n[2]:"vp",a=n[3]||"top",s=[];if(r){var l,c,u,f;o=new RegExp(e,"i");for(var d=0;d<r.length;d++)c=(l=r[d].match(o))[1]&&"-"===l[1]?-1:1,u=l[2]&&parseInt(l[2])*c||0,f="px",l[3]&&(f="%"===l[3]?i:l[3]),s.push({offset:u,subject:f})}return{original:t,subject:i,anchor:a,offsets:s}},calculateCoord:function(t,e,o){r._isString(t)&&(t=r.parseCoord(t));var n,i,a,s,l=0;if("vp"===t.subject)switch(t.anchor){case"top":l=r.scrollTop;break;case"center":l=r.scrollCenter;break;case"bottom":l=r.scrollBottom}else if("doc"===t.subject)switch(t.anchor){case"top":l=0;break;case"center":l=r.docMiddle;break;case"bottom":l=r.docHeight}else{var c="con"===t.subject?o:e,u=c.outerHeight(),f=c.offset().top,d=f+u,m=f+Math.floor(u/2);switch(t.anchor){case"top":l=f;break;case"center":l=m;break;case"bottom":l=d}}for(n=0;n<t.offsets.length;n++){if(a=(i=t.offsets[n]).offset,"px"!==i.subject){switch(s=0,i.subject){case"vp":s=r.winHeight;break;case"doc":s=r.docHeight;break;case"el":s=e.outerHeight();break;case"con":s=o.outerHeight()}a=Math.ceil(i.offset/100*s)}l+=a}return l},cmpCoords:function(t,e,o){return r.calculateCoord(t[0],e,o)-r.calculateCoord(t[1],e,o)},isRuleInActiveWidthRange:function(t){var e,n,i=r._default(t,"minWidth",0),a=r._default(t,"maxWidth","infinity"),s=r._default(r.options,"meter"),l=o.default(window).width();return s.length?(e=s.length?parseInt(s.css("min-width")):0,n="none"===(n=s.length?s.css("max-width"):"none")?"infinity":parseInt(n),i<=e&&("infinity"===a||a>=n)):i<l&&("infinity"===a||a>=l)},isRuleActive:function(t,e,o){if(!r.isRuleInActiveWidthRange(t))return!1;var n=r._default(t,"direction",0),i=r.direction;if(n&&(n>0&&i<0||n<0&&i>=0))return!1;var a=r._default(t,"from","0"),s=r._default(t,"to","finish"),l=r.cmpCoords(a,e,o);if(l>0)return!1;var c=r.cmpCoords(s,e,o);return!(c<=0)&&{offset:-l,length:c-l}},getScrollLayoutLength:function(){return Object.keys?Object.keys(r.scrollLayout).length:o.default.map(r.scrollLayout,(function(){return 1})).length},addItem:function(t,e,n,i){if(!e.length)return!1;var a,s,l,c,u,f;for(var d in i=i||"self",f=function(t,e,o,n){var i,a,s=e/o,l=r._default(n,"cssFrom"),c=r._default(n,"cssTo"),u={};for(var f in l)i=l[f],a=r._default(c,f,i),u[f]=r.getTransitionValue(i,a,s);t.css(r.extendCssWithPrefix(u))},n)a=n[d],s=r._default(a,"from","doc-top"),(r._isString(s)||r._isNumber(s))&&(s=r.parseCoords(""+s),a.from=s),l=r._default(a,"to","doc-bottom"),(r._isString(l)||r._isNumber(l))&&(l=r.parseCoords(""+l),a.to=l),c=r._default(a,"cssFrom"),u=r._default(a,"cssTo"),c&&u&&(a.cssOnScroll=f);if(e.length>1)return e.each((function(e){for(var a,s,l=[],c=null,u=0;u<n.length;u++)a=n[u],s={},o.default.extend(s,a),l.push(s);i&&(c="self"===i?i:i.length>1&&e<i.length?o.default(i[e]):i),r.addItem(t+"-"+e,o.default(this),l,c)})),!0;var m=r._default(r.scrollLayout,t);return m?m.rules.concat(n):r.scrollLayout[t]={element:e,container:i,rules:n},!0},factory:function(t,e,o,n){return r.init(),!!t.length&&(!!e&&(n=n||t[0].tagName+"_"+r.getScrollLayoutLength(),void r.addItem(n,t,e,o,!1)))},stickItem:function(t,e,o){r.stickItemXY(t,e,o instanceof Array?o:[o])},stickItemXY:function(t,e,n){n=n||[];var i,a,s,l,c,u,f,d,m=[];for(var h in n)i=n[h],a=r._default(i,"$bottomContainer",o.default("body")),s=r._default(i,"mode"),l=r._default(i,"offsetTop",0),c=r._default(i,"offsetBottom",0),u=r._default(i,"minWidth",0),f=r._default(i,"maxWidth","infinity"),d=r._default(i,"static",!1),"next"===a?(s=s||"margin",a=o.default(e).next()):"parent"!==a&&a||(s=s||"padding",a=o.default(e).parent()),d?m.push({source:"sticky",alias:"static",minWidth:u,maxWidth:f,bottomContainer:a}):(m.push({source:"sticky",alias:"top",minWidth:u,maxWidth:f,offsetTop:l,offsetBottom:c,bottomContainer:a,mode:s}),m.push({source:"sticky",alias:"fixed",minWidth:u,maxWidth:f,offsetTop:l,offsetBottom:c,bottomContainer:a,mode:s}),m.push({source:"sticky",alias:"bottom",minWidth:u,maxWidth:f,offsetTop:l,offsetBottom:c,bottomContainer:a,mode:s}));r.addItem(t,o.default(e),m)},processStickyItemRange:function(t,e){e=e||{};var n=r._default(e,"bottomContainer",o.default("body")),i=(r._default(e,"mode"),r._default(e,"offsetTop",0)),a=r._default(e,"offsetBottom",0),s=parseInt(t.css("margin-top"))+t.height()+parseInt(t.css("margin-bottom"));"border-box"===t.css("box-sizing")&&(s+=parseInt(t.css("padding-top"))+parseInt(t.css("padding-bottom")));var l=parseInt(n.css("margin-top"))+n.height()+parseInt(n.css("margin-bottom"));"border-box"===n.css("box-sizing")&&(l+=parseInt(n.css("padding-top"))+parseInt(n.css("padding-bottom")));var c=Math.round(t.offset().top-parseInt(t.css("margin-top"))),u=Math.round(n.offset().top+(l-s-a));switch(e.alias){case"top":e.from=0,e.to=c-i,e.css={position:"absolute",top:c+"px"},e.itemHeight=s;break;case"fixed":e.from=c-i,e.to=u,e.css={position:"fixed",top:i+"px"},e.itemHeight=s;break;case"bottom":e.from=u,e.css={position:"absolute",top:u+i+"px"},e.itemHeight=s;break;case"static":e.from=0,e.css={position:"",top:""},e.itemHeight=0}return e},onResize:function(){r.winHeight=o.default(window).height(),r.docHeight=r.body.height(),r.docMiddle=Math.floor(r.docHeight/2);var t=!1;for(var e in r.scrollLayout){var n,i,a=r.scrollLayout[e];for(var s in a.rules)n=a.rules[s],t|=i=r.isRuleInActiveWidthRange(n),i&&void 0===n.from&&(o.default(a.element).css("position",""),o.default(a.element).css("top",""),n.bottomContainer&&n.bottomContainer.css("margin-top",""),"sticky"===r._default(n,"source")&&(a.rules[s]=r.processStickyItemRange(a.element,n)))}return t&&(r.scrollLayout=r.scrollLayout,setTimeout((function(){r.onScroll(!0)}),0)),!0},getProgress:function(t,e){var o=t/e;return{offset:t,length:e,relative:o,left:e-t,leftRelative:1-o}},getTransitionFloatValue:function(t,e,o){return o<=0?t:o>=1?e:t+(e-t)*o},getTransitionIntValue:function(t,e,o){return Math.round(r.getTransitionFloatValue(t,e,o))},hashColor2rgb:function(t){var e=t.match(/^#([0-9a-f]{3})$/i);return e?[17*parseInt(e[1].charAt(0),16),17*parseInt(e[1].charAt(1),16),17*parseInt(e[1].charAt(2),16)]:(e=t.match(/^#([0-9a-f]{6})$/i))?[parseInt(e[1].substr(0,2),16),parseInt(e[1].substr(2,2),16),parseInt(e[1].substr(4,2),16)]:[0,0,0]},rgb2HashColor:function(t,e,o){var n,r,i="#";for(var a in arguments)r=(n=arguments[a]).toString(16),n<16&&(r="0"+r),i+=r;return i},getTransitionColorValue:function(t,e,o){if(o<=0)return t;if(o>=1)return e;var n=r.hashColor2rgb(t),i=r.hashColor2rgb(e),a=r.getTransitionIntValue(n[0],i[0],o),s=r.getTransitionIntValue(n[1],i[1],o),l=r.getTransitionIntValue(n[2],i[2],o);return r.rgb2HashColor(a,s,l)},getTransitionValue:function(t,e,o){if(o<=0)return t;if(o>=1)return e;var n=0;if(r._isNumber(t)&&r._isNumber(e))return r.getTransitionFloatValue(t,e,o);var i=/(\d*\.\d+)|(\d+)|(#[0-9a-f]{6})|(#[0-9a-f]{3})/gi,a=(""+e).match(i);return(""+t).replace(i,(function(t,e,i,s,l){var c=a[n];return n++,i&&i.length?/\d*\.\d+/.test(c)?r.getTransitionFloatValue(parseFloat(t),parseFloat(c),o):r.getTransitionIntValue(parseInt(t),parseInt(c),o):e&&e.length?r.getTransitionFloatValue(parseFloat(t),parseFloat(c),o):s&&s.length||l&&l.length?r.getTransitionColorValue(t,c,o):t}))},onScroll:function(t){var e=r.body.scrollTop();if(!t&&e===r.scrollTop)return!1;var o=r.scrollTop,n=r.direction;r.scrollTop=e,r.scrollBottom=e+r.winHeight,r.scrollCenter=e+Math.floor(r.winHeight/2),r.direction=e-o;var i,a,s,l,c,u,f,d,m,h,p,g,b,C,v,y,S=!(r.direction===n||r.direction<0&&n<0||r.direction>0&&n>0);for(u in r.scrollLayout){for(a=(i=r.scrollLayout[u]).rules.length,s=[],l=[],c=[],f=0;f<a;f++)h=i.rules[f],p=r._default(h,"minWidth",0),g=r._default(h,"maxWidth","infinity"),b="self"===i.container?i.element:i.container,h.checkin=r.isRuleActive(h,i.element,b),h.class=h.class||"scroll-pos-"+h.alias+" window-width-"+p+"-to-"+g,h.checkin?(c.push(f),h.isActive||(h.isActive=!0,s.push(f))):h.isActive&&(h.isActive=!1,l.push(f)),i.rules[f]=h;for(m=0;m<l.length;m++)f=l[m],h=i.rules[f],i.element.removeClass(h.class),h.cssOnScroll&&(d=h.length||0,h.cssOnScroll(i.element,e>o?d:0,d,h)),h.onScroll&&(d=h.length||0,h.onScroll(i.element,e>o?d:0,d,h)),h.onCheckOut&&h.onCheckOut(i.element,h),h.onTopOut&&e<o?h.onTopOut(i.element,h):h.onBottomOut&&e>o&&h.onBottomOut(i.element,h);for(m=0;m<s.length;m++)f=s[m],(h=i.rules[f]).css&&i.element.css(r.extendCssWithPrefix(h.css)),h.addClass&&i.element.addClass(h.addClass),h.removeClass&&i.element.removeClass(h.removeClass),i.element.addClass(h.class),C=r._default(h,"bottomContainer"),v=r._default(h,"mode"),y=r._default(h,"itemHeight"),C&&v&&y&&C.css(v+"-top",y+"px"),h.onCheckIn&&h.onCheckIn(i.element,h),h.onTopIn&&e>o?h.onTopIn(i.element,h):h.onBottomIn&&e<o&&h.onBottomIn(i.element,h),h.length=h.checkin.length;for(m=0;m<c.length;m++)f=c[m],(h=i.rules[f]).cssOnScroll&&h.cssOnScroll(i.element,h.checkin.offset,h.checkin.length,h),h.onScroll&&h.onScroll(i.element,h.checkin.offset,h.checkin.length,h),S&&h.onDirectionChanged&&h.onDirectionChanged(i.element,r.direction,h);r.scrollLayout[u]=i}},detectCSSPrefix:function(){var t=/^(?:O|Moz|webkit|ms)|(?:-(?:o|moz|webkit|ms)-)/;if(window.getComputedStyle){var e=window.getComputedStyle(document.body,null);for(var o in e)if(r.theCSSPrefix=o.match(t)||+o===o&&e[o].match(t),r.theCSSPrefix)break;r.theCSSPrefix?(r.theCSSPrefix=r.theCSSPrefix[0],"-"===r.theCSSPrefix.slice(0,1)?(r.theDashedCSSPrefix=r.theCSSPrefix,r.theCSSPrefix={"-webkit-":"webkit","-moz-":"Moz","-ms-":"ms","-o-":"O"}[r.theCSSPrefix]):r.theDashedCSSPrefix="-"+r.theCSSPrefix.toLowerCase()+"-"):r.theCSSPrefix=r.theDashedCSSPrefix=""}},cssPrefix:function(t){return r.theDashedCSSPrefix+t},extendCssWithPrefix:function(t){var e,n,i,a,s,l={};for(e in t)n=/^-(moz-|webkit-|o-|ms-)?/i,i=e.match(n),a=e.slice(1),i&&!i[1]&&(s=t[e],l[a]=s,l[r.cssPrefix(a)]=s,delete t[e]);return o.default.extend(t,l),t}};r.now=Date.now||function(){return+new Date},r.getRAF=function(){var t=window.requestAnimationFrame||window[r.theCSSPrefix.toLowerCase()+"RequestAnimationFrame"],e=r.now();return t||(t=function(t){var o=r.now()-e,n=Math.max(0,1e3/60-o);return window.setTimeout((function(){e=r.now(),t()}),n)}),t},r.getCAF=function(){var t=window.cancelAnimationFrame||window[r.theCSSPrefix.toLowerCase()+"CancelAnimationFrame"];return!r.isMobile&&t||(t=function(t){return window.clearTimeout(t)}),t},r.animLoop=function(){r.onScroll(),r.animFrame=window.requestAnimFrame(r.animLoop)},r.init=function(t){if(r.isInitialized)return!1;o.default.extend(r.options,t),r.isMobile=r._default(r.options,"isMobile",/Android|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent||navigator.vendor||window.opera)),r.detectCSSPrefix(),r.body=o.default(r.options.body),window.requestAnimFrame=r.getRAF(),window.cancelAnimFrame=r.getCAF(),r.timesCalled=0,o.default(document).ready((function(){o.default(window).resize(r.onResize).resize(),r.animLoop()})),r.isInitialized=!0},r.destroy=function(){window.cancelAnimFrame(r.animFrame)},r.factorySticky=function(t,e,o){return o=o||t[0].tagName+"_"+r.getScrollLayoutLength(),!!r.stickItemXY(o,t,e instanceof Array?e:[e])&&o},o.default.scroolly=r,o.default.fn.scroolly=function(t,e,o){return r.factory(this,t,e,o),this},o.default.fn.scroollySticky=function(t,e){return r.init(),!!this.length&&r.factorySticky(this,t,e)}}($);
//# sourceMappingURL=jquery.scroolly.iife.min.js.map
